<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥³å·«çš„æ¯’è¯ - åŒ–å­¦å¡ç‰‡æ¸¸æˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0c0315 0%, #1e0a33 50%, #0c0315 100%);
            color: #e0d6ff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }
        
        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(157, 78, 221, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(157, 78, 221, 0.1) 0%, transparent 20%),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="1" fill="%237b2cbf" opacity="0.2"/></svg>');
            z-index: -1;
        }
        
        .header {
            text-align: center;
            margin-bottom: 15px;
            width: 100%;
            max-width: 1000px;
            position: relative;
            padding-top: 10px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 0 15px #9d4edd, 0 0 25px #7b2cbf;
            letter-spacing: 2px;
            background: linear-gradient(to right, #c77dff, #e0aaff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
        }
        
        h1::after {
            content: "â˜ ï¸";
            position: absolute;
            right: -40px;
            top: 0;
            font-size: 2.2rem;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0); }
        }
        
        .subtitle {
            font-size: 1.1rem;
            margin-bottom: 20px;
            color: #c9b6e4;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .main-container {
            display: flex;
            width: 100%;
            max-width: 1000px;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .players-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 20%;
            min-width: 180px;
            margin-top: 20px; /* ä¸Šç§»ç©å®¶ç§¯åˆ†ç•Œé¢ */
        }
        
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 80%;
        }
        
        .player-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 10px; /* ç¼©å°å†…è¾¹è· */
            border-radius: 12px; /* ç¼©å°åœ†è§’ */
            background: rgba(45, 13, 70, 0.6);
            border: 1px solid #7b2cbf;
            box-shadow: 0 0 10px rgba(123, 44, 191, 0.4);
            backdrop-filter: blur(5px);
            position: relative;
            transition: all 0.3s ease;
        }
        
        .player-info::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(157, 78, 221, 0.1), transparent);
            border-radius: 12px;
            z-index: -1;
        }
        
        .player-info.active {
            background: rgba(157, 78, 221, 0.2);
            box-shadow: 0 0 12px rgba(157, 78, 221, 0.5);
            border: 1px solid #9d4edd;
        }
        
        .player-label {
            font-size: 1.2rem; /* ç¼©å°æ ‡ç­¾å­—ä½“ */
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .player-label i {
            color: #ff6ec7;
            font-size: 1rem;
        }
        
        .player-score {
            font-size: 2.2rem; /* ç¼©å°åˆ†æ•°å­—ä½“ */
            font-weight: bold;
            color: #ff6ec7;
            text-shadow: 0 0 8px rgba(255, 110, 199, 0.7);
            margin: 5px 0;
        }
        
        .poison-status {
            font-size: 0.9rem; /* ç¼©å°å­—ä½“ */
            color: #ff6ec7;
            font-weight: bold;
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            border-radius: 15px;
            background: rgba(157, 78, 221, 0.2);
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 10px;
            width: 100%;
            margin-bottom: 20px;
        }
        
        .card {
            aspect-ratio: 3/4;
            perspective: 1000px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            padding: 8px;
        }
        
        .card-back {
            background: #12071c;
            background-image: 
                linear-gradient(45deg, rgba(45, 13, 70, 0.5) 0%, rgba(27, 5, 45, 0.7) 100%),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M20,20 Q50,5 80,20 T80,80 Q50,95 20,80 Z" fill="none" stroke="%239d4edd" stroke-width="0.5" opacity="0.3"/></svg>');
            border: 2px solid #7b2cbf;
        }
        
        .card-back::before {
            content: "â˜ ï¸";
            font-size: 2.2rem; /* å¢å¤§æ¯’è¯ç¬¦å· */
            opacity: 0.7;
            text-shadow: 0 0 10px rgba(157, 78, 221, 0.8);
        }
        
        .card-front {
            background: #1e0a33;
            border: 2px solid #9d4edd;
            color: #e0d6ff;
            font-size: 1.2rem; /* å¢å¤§å¡ç‰‡å­—ä½“ */
            font-weight: bold;
            transform: rotateY(180deg);
            text-shadow: 0 0 5px rgba(224, 214, 255, 0.8);
            overflow: hidden;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 12px;
        }
        
        .card.poison {
            animation: poisonGlow 2s infinite;
            box-shadow: 0 0 20px rgba(255, 50, 50, 0.8);
        }
        
        @keyframes poisonGlow {
            0% { box-shadow: 0 0 10px rgba(255, 0, 0, 0.5); }
            50% { box-shadow: 0 0 25px rgba(255, 0, 0, 0.9); }
            100% { box-shadow: 0 0 10px rgba(255, 0, 0, 0.5); }
        }
        
        .card.locked {
            cursor: not-allowed;
            transform: none !important;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        button {
            background: linear-gradient(to bottom, #7b2cbf, #5a189a);
            color: #f8f7ff;
            border: none;
            padding: 10px 25px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(123, 44, 191, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        button::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(rgba(255,255,255,0.1), transparent);
            transform: rotate(30deg);
            transition: all 0.5s ease;
        }
        
        button:hover {
            background: linear-gradient(to bottom, #9d4edd, #7b2cbf);
            transform: translateY(-3px);
            box-shadow: 0 6px 18px rgba(157, 78, 221, 0.6);
        }
        
        button:hover::after {
            transform: rotate(30deg) translate(20%, 20%);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        button:disabled {
            background: #3c096c;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .instructions {
            background: rgba(45, 13, 70, 0.6);
            padding: 18px;
            border-radius: 12px;
            border: 1px solid #7b2cbf;
            width: 100%;
            max-width: 1000px;
            margin-bottom: 20px;
            backdrop-filter: blur(5px);
        }
        
        .instructions h2 {
            color: #e0aaff;
            margin-bottom: 12px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 1.4rem;
        }
        
        .instructions ul {
            padding-left: 22px;
        }
        
        .instructions li {
            margin-bottom: 8px;
            line-height: 1.5;
            display: flex;
            align-items: flex-start;
            gap: 6px;
            font-size: 0.95rem;
        }
        
        .instructions li::before {
            content: "â€¢";
            color: #ff6ec7;
            font-size: 1.3rem;
        }
        
        .death-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 2, 18, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }
        
        .death-modal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .death-content {
            background: linear-gradient(135deg, #2d0d46 0%, #1a0525 100%);
            padding: 35px;
            border-radius: 18px;
            text-align: center;
            max-width: 450px;
            width: 90%;
            border: 2px solid #9d4edd;
            box-shadow: 0 0 35px rgba(157, 78, 221, 0.7);
            position: relative;
            overflow: hidden;
        }
        
        .death-content::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="5" fill="none" stroke="%239d4edd" stroke-width="0.3" opacity="0.2"/></svg>');
            z-index: -1;
        }
        
        .death-title {
            font-size: 2.4rem;
            color: #ff6ec7;
            margin-bottom: 18px;
            text-shadow: 0 0 12px rgba(255, 110, 199, 0.8);
        }
        
        .death-message {
            font-size: 1.2rem;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .death-icons {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin: 20px 0;
            font-size: 5rem;
        }
        
        .death-icons .skull {
            animation: pulse 1.5s infinite;
        }
        
        .death-icons .poison-bottle {
            animation: swing 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }
        
        @keyframes swing {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(15deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(-15deg); }
            100% { transform: rotate(0deg); }
        }
        
        .poison-card-display {
            background: rgba(255, 50, 50, 0.2);
            padding: 12px;
            border-radius: 8px;
            border: 2px solid #ff6ec7;
            margin: 18px 0;
            font-size: 1.6rem;
            font-weight: bold;
            animation: poisonGlow 2s infinite;
        }
        
        .current-turn {
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 12px;
            color: #ff9ecc;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 8px 18px;
            border-radius: 18px;
            background: rgba(157, 78, 221, 0.2);
        }
        
        .logo {
            position: absolute;
            top: 8px;
            right: 8px;
            font-size: 1.6rem;
            color: #9d4edd;
        }
        
        .witch-hat {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2rem;
        }
        
        @media (max-width: 900px) {
            .main-container {
                flex-direction: column;
            }
            
            .players-container {
                width: 100%;
                flex-direction: row;
                justify-content: space-between;
                margin-top: 0;
            }
            
            .player-info {
                width: 48%;
            }
            
            .game-container {
                width: 100%;
            }
            
            .game-board {
                grid-template-columns: repeat(6, 1fr);
                grid-template-rows: repeat(4, 1fr);
            }
        }
        
        @media (max-width: 700px) {
            .game-board {
                grid-template-columns: repeat(4, 1fr);
                grid-template-rows: repeat(6, 1fr);
            }
            
            .players-container {
                flex-direction: column;
            }
            
            .player-info {
                width: 100%;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            h1::after {
                display: none;
            }
        }
        
        @media (max-width: 480px) {
            .game-board {
                grid-template-columns: repeat(3, 1fr);
                grid-template-rows: repeat(8, 1fr);
            }
            
            .controls {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>å¥³å·«çš„æ¯’è¯</h1>
        <div class="subtitle">åœ¨ç¥ç§˜çš„åŒ–å­¦ä¸–ç•Œä¸­é¿å¼€å¯¹æ‰‹çš„è‡´å‘½æ¯’è¯ï¼Œæ”¶é›†æœ€å¤šçš„å¡ç‰‡èµ¢å¾—èƒœåˆ©ï¼</div>
        <div class="logo">ğŸ§ªâš—ï¸â˜ ï¸</div>
    </div>
    
    <div class="main-container">
        <div class="players-container">
            <div class="player-info" id="player1-info">
                <div class="witch-hat">ğŸ©</div>
                <div class="player-label"><i class="fas fa-user"></i>ç©å®¶ä¸€</div>
                <div class="player-score" id="player1-score">0</div>
                <div class="poison-status" id="player1-poison"><i class="fas fa-skull"></i>æœªè®¾ç½®</div>
            </div>
            
            <div class="player-info" id="player2-info">
                <div class="witch-hat">ğŸ©</div>
                <div class="player-label"><i class="fas fa-user"></i>ç©å®¶äºŒ</div>
                <div class="player-score" id="player2-score">0</div>
                <div class="poison-status" id="player2-poison"><i class="fas fa-skull"></i>æœªè®¾ç½®</div>
            </div>
        </div>
        
        <div class="game-container">
            <div class="current-turn" id="current-turn"><i class="fas fa-hand-point-right"></i>ç©å®¶ä¸€ï¼Œè¯·é€‰æ‹©ä½ çš„æ¯’è¯å¡ç‰‡</div>
            
            <div class="game-board" id="game-board"></div>
            
            <div class="controls">
                <button id="start-btn"><i class="fas fa-play"></i> å¼€å§‹æ¸¸æˆ</button>
                <button id="restart-btn"><i class="fas fa-redo"></i> é‡æ–°å¼€å§‹</button>
            </div>
        </div>
    </div>
    
    <div class="instructions">
        <h2><i class="fas fa-book"></i> æ¸¸æˆè§„åˆ™</h2>
        <ul>
            <li><strong>ç¬¬1é˜¶æ®µï¼š</strong> ç©å®¶ä¸€å’Œç©å®¶äºŒä¾æ¬¡é€‰æ‹©ä¸€å¼ å¡ç‰‡ä½œä¸ºè‡ªå·±çš„æ¯’è¯ï¼ˆå¡ç‰‡ä¼šç¿»è½¬5ç§’åç¿»å›ï¼‰</li>
            <li><strong>ç¬¬2é˜¶æ®µï¼š</strong> ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"æŒ‰é’®ï¼Œç©å®¶ä¸€å’Œç©å®¶äºŒè½®æµç¿»å¼€å¡ç‰‡</li>
            <li><strong>èƒœåˆ©æ¡ä»¶ï¼š</strong> å¦‚æœç©å®¶æŠ½åˆ°å¯¹æ–¹è®¾ç½®çš„æ¯’è¯å¡ï¼Œåˆ™ç«‹å³æ­»äº¡ï¼Œå¯¹æ‰‹è·èƒœ</li>
            <li><strong>è®¡åˆ†è§„åˆ™ï¼š</strong> æ¯å®‰å…¨ç¿»å¼€ä¸€å¼ å¡ç‰‡å¾—1åˆ†ï¼Œå®‰å…¨ç¿»å¼€å¡ç‰‡å¤šè€…è·èƒœ</li>
            <li><strong>æ³¨æ„ï¼š</strong> å°å¿ƒï¼æ¯’è¯æ— å¤„ä¸åœ¨ï¼Œè®°ä½å¯¹æ‰‹çš„æ¯’è¯ä½ç½®</li>
        </ul>
    </div>
    
    <div class="death-modal" id="death-modal">
        <div class="death-content">
            <div class="death-icons">
                <div class="skull">â˜ ï¸</div>
                <div class="poison-bottle">ğŸ§ª</div>
            </div>
            <h2 class="death-title">æ¯’è¯å‘ä½œï¼</h2>
            <p class="death-message" id="death-message"></p>
            <div class="poison-card-display" id="poison-card-display"></div>
            <p class="death-message" id="death-score"></p>
            <button id="play-again-btn"><i class="fas fa-redo"></i> å†ç©ä¸€æ¬¡</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // åŒ–å­¦å…ƒç´ ã€åç§°å’ŒåŒ–åˆç‰©åˆ—è¡¨ï¼ˆåŒ…å«é™„ä»¶ä¸­çš„åŒ–å­¦å¼ï¼‰
            const chemicals = [
                "æ°¢", "æ°¦", "é”‚", "é“", "ç¡¼", 
                "ç¢³", "æ°®", "æ°§", "æ°Ÿ", "æ°–",
                "é’ ", "é•", "é“", "ç¡…", "ç£·",
                "ç¡«", "æ°¯", "æ°©", "é’¾", "é’™",
                "é”°", "é“", "é“œ", "é”Œ", "é“¶",
                "ç¢˜", "é’¡", "é‡‘", "æ±", "é“…",
                "ç¢³é…¸æ ¹ç¦»å­", "ç¡«é…¸æ ¹ç¦»å­", "ç¡é…¸æ ¹ç¦»å­", "æ°¢æ°§æ ¹ç¦»å­", "äºšç¡«é…¸æ ¹ç¦»å­",
                "é“µæ ¹ç¦»å­", "ç¢³é…¸æ°¢æ ¹ç¦»å­", "ç£·é…¸æ ¹ç¦»å­", "æ°§ç¦»å­", "ç¡«ç¦»å­",
                "æ°Ÿç¦»å­", "æ°¯ç¦»å­", "æ°¢ç¦»å­", "äºšé“ç¦»å­", "é’¾ç¦»å­",
                "é’ ç¦»å­", "é“¶ç¦»å­", "é“ç¦»å­", "é“ç¦»å­", "é’™ç¦»å­",
                "é•ç¦»å­", "é’¡ç¦»å­", "é”Œç¦»å­", "é“œç¦»å­", "æ°¦æ°”",
                "æ°®æ°”", "æ°–æ°”", "æ°§æ°”", "æ°©æ°”", "æ°¯æ°”",
                "æ°¢æ°”", "äºŒæ°§åŒ–ç¡«", "æ°§åŒ–äºšé“", "æ°§åŒ–é•", "æ°´",
                "å››æ°§åŒ–ä¸‰é“", "ä¸‰æ°§åŒ–ç¡«", "æ°§åŒ–é“", "æ°§åŒ–é’™", "è¿‡æ°§åŒ–æ°¢",
                "ä¸€æ°§åŒ–ç¢³", "äºŒæ°§åŒ–é”°", "æ°§åŒ–é“œ", "ä¸€æ°§åŒ–æ°®", "äº”æ°§åŒ–äºŒç£·",
                "äºŒæ°§åŒ–ç¢³", "æ°§åŒ–æ±", "æ°§åŒ–é“", "äºŒæ°§åŒ–æ°®", "æ°¨æ°”",
                "æ°¢æ°§åŒ–é’™", "æ°¢æ°§åŒ–é”Œ", "æ°¢æ°§åŒ–é“", "ç¡«é…¸é’¾", "ç¡«é…¸é’ ",
                "ç¡«é…¸é“¶", "ç¡«é…¸é“µ", "ç¡«é…¸é’™", "ç¡«é…¸é•", "ç¡«é…¸é’¡",
                "ç¡«é…¸é”Œ", "ç¡«é…¸é“œ", "ç¡«é…¸äºšé“", "ç¡«é…¸é“", "ç¡«é…¸é“",
                "ç¢³é…¸é’¡", "ç¢³é…¸é”Œ", "æ°¢æ°§åŒ–é’ ", "æ°¢æ°§åŒ–é’¡", "æ°¢æ°§åŒ–é“",
                "æ°¯åŒ–é’¾", "æ°¯åŒ–é’ ", "æ°¯åŒ–é“¶", "æ°¯åŒ–é“µ", "æ°¯åŒ–é’™",
                "æ°¯åŒ–é•", "æ°¯åŒ–é’¡", "æ°¯åŒ–é”Œ", "æ°¯åŒ–é“œ", "æ°¯åŒ–äºšé“",
                "æ°¯åŒ–é“", "æ°¯åŒ–é“", "ç¢³é…¸é’™", "ç¢³é…¸é•", "æ°¢æ°§åŒ–é’¾",
                "æ°¢æ°§åŒ–é•", "æ°¢æ°§åŒ–é“œ", "ç¡é…¸é’¾", "ç¡é…¸é’ ", "ç¡é…¸é“¶",
                "ç¡é…¸é“µ", "ç¡é…¸é’™", "ç¡é…¸é•", "ç¡é…¸é’¡", "ç¡é…¸é”Œ",
                "ç¡é…¸é“œ", "ç¡é…¸äºšé“", "ç¡é…¸é“", "ç¡é…¸é“", "ç¢³é…¸é’¾",
                "ç¢³é…¸é’ ", "ç¢³é…¸æ°¢é’ ", "æ°§åŒ–é’ ", "ç¡é…¸é’¾", "ç¢³é…¸é’ ",
                "æ°§åŒ–é“", "æ°¢æ°§åŒ–é“", "æ°¯åŒ–äºšé“", "æ°¢æ°§åŒ–é“œ", "äºŒæ°§åŒ–ç¡…",
                "ä¸‰æ°§åŒ–ç¡«", "ç¡é…¸", "ç¡«é…¸é“µ", "æ°¯åŒ–é“µ", "æ°¢æ°§åŒ–äºšé“",
                "ç¡«åŒ–é”Œ", "æ°§åŒ–äºšé“", "äº”æ°§åŒ–äºŒæ°®", "æ°¢æ°§åŒ–é’™", "ç¡é…¸é“¶",
                "æ°¯åŒ–äºšé“", "ç¡«é…¸é’ ", "ç¢³é…¸æ°¢é“µ", "ç¢³é…¸", "ç¢³é…¸é’™",
                "æ°¯åŒ–é•", "æ°§åŒ–é’™", "æ°¯åŒ–é“", "ç¢³é…¸é’¾", "äºŒæ°§åŒ–ç¡«",
                "æ°§åŒ–é“œ", "æ°§åŒ–é•", "ç¡«é…¸é“œ", "ç¡«é…¸é’ ", "ç¡é…¸é“µ",
                "å››æ°§åŒ–ä¸‰é“", "ç¡é…¸é’™", "ç¢³é…¸é“µ", "ç¡«åŒ–é’ ", "æ°¢æ°§åŒ–é•",
                "ç¡«é…¸é“", "ç¡«é…¸", "H", "He", "Li", 
                "Be", "B", "C", "N", "O", "F", "Ne",
                "Na", "Mg", "Al", "Si", "P", "S", "Cl", "Ar", "K", "Ca",
                "Mn", "Fe", "Cu", "Zn", "Ag", "Au", "I", "Ba", "Hg", "Pb",
                "COâ‚ƒÂ²â»", "SOâ‚„Â²â»", "NOâ‚ƒâ»", "OHâ»", "SOâ‚ƒÂ²â»", "NHâ‚„âº", "HCOâ‚ƒâ»", "POâ‚„Â³â»", "OÂ²â»", "SÂ²â»",
                "Fâ»", "Clâ»", "Hâº", "FeÂ²âº", "Kâº", "Naâº", "Agâº", "AlÂ³âº", "FeÂ³âº", "CaÂ²âº",
                "MgÂ²âº", "BaÂ²âº", "ZnÂ²âº", "CuÂ²âº", "He", "Nâ‚‚", "Ne", "Oâ‚‚", "Ar", "Clâ‚‚",
                "Hâ‚‚", "SOâ‚‚", "FeO", "MgO", "Hâ‚‚O", "Feâ‚ƒOâ‚„", "SOâ‚ƒ", "Feâ‚‚Oâ‚ƒ", "CaO", "Hâ‚‚Oâ‚‚",
                "CO", "MnOâ‚‚", "CuO", "NO", "Pâ‚‚Oâ‚…", "COâ‚‚", "HgO", "Alâ‚‚Oâ‚ƒ", "NOâ‚‚", "NHâ‚ƒ",
                "Ca(OH)â‚‚", "Zn(OH)â‚‚", "Al(OH)â‚ƒ", "Kâ‚‚SOâ‚„", "Naâ‚‚SOâ‚„", "Agâ‚‚SOâ‚„", "(NHâ‚„)â‚‚SOâ‚„", "CaSOâ‚„", "MgSOâ‚„", "BaSOâ‚„",
                "ZnSOâ‚„", "CuSOâ‚„", "FeSOâ‚„", "Feâ‚‚(SOâ‚„)â‚ƒ", "Alâ‚‚(SOâ‚„)â‚ƒ", "BaCOâ‚ƒ", "ZnCOâ‚ƒ", "NaOH", "Ba(OH)â‚‚", "Fe(OH)â‚ƒ",
                "KCl", "NaCl", "AgCl", "NHâ‚„Cl", "CaClâ‚‚", "MgClâ‚‚", "BaClâ‚‚", "ZnClâ‚‚", "CuClâ‚‚", "FeClâ‚‚",
                "FeClâ‚ƒ", "AlClâ‚ƒ", "CaCOâ‚ƒ", "MgCOâ‚ƒ", "KOH", "Mg(OH)â‚‚", "Cu(OH)â‚‚", "KNOâ‚ƒ", "NaNOâ‚ƒ", "AgNOâ‚ƒ",
                "NHâ‚„NOâ‚ƒ", "Ca(NOâ‚ƒ)â‚‚", "Mg(NOâ‚ƒ)â‚‚", "Ba(NOâ‚ƒ)â‚‚", "Zn(NOâ‚ƒ)â‚‚", "Cu(NOâ‚ƒ)â‚‚", "Fe(NOâ‚ƒ)â‚‚", "Fe(NOâ‚ƒ)â‚ƒ", "Al(NOâ‚ƒ)â‚ƒ", "Kâ‚‚COâ‚ƒ",
                "Naâ‚‚COâ‚ƒ", "NaHCOâ‚ƒ", "Naâ‚‚O", "KNOâ‚ƒ", "Naâ‚‚COâ‚ƒ", "Feâ‚‚Oâ‚ƒ", "Fe(OH)â‚ƒ", "FeClâ‚‚", "Cu(OH)â‚‚", "SiOâ‚‚",
                "SOâ‚ƒ", "HNOâ‚ƒ", "(NHâ‚„)â‚‚SOâ‚„", "NHâ‚„Cl", "Fe(OH)â‚‚", "ZnS", "FeO", "Nâ‚‚Oâ‚…", "Ca(OH)â‚‚", "AgNOâ‚ƒ",
                "FeClâ‚‚", "Naâ‚‚SOâ‚„", "NHâ‚„HCOâ‚ƒ", "Hâ‚‚COâ‚ƒ", "CaCOâ‚ƒ", "MgClâ‚‚", "CaO", "FeClâ‚ƒ", "Kâ‚‚COâ‚ƒ", "SOâ‚‚",
                "CuO", "MgO", "CuSOâ‚„", "Naâ‚‚SOâ‚„", "NHâ‚„NOâ‚ƒ", "Feâ‚ƒOâ‚„", "Ca(NOâ‚ƒ)â‚‚", "(NHâ‚„)â‚‚COâ‚ƒ", "Naâ‚‚S", "Mg(OH)â‚‚",
                "Feâ‚‚(SOâ‚„)â‚ƒ", "Hâ‚‚SOâ‚„"
            ];
            
            // æ¸¸æˆçŠ¶æ€å˜é‡
            const state = {
                cards: [],
                player1Poison: null,
                player2Poison: null,
                player1Score: 0,
                player2Score: 0,
                currentPlayer: 1,
                gamePhase: 'selectPoison1',
                lockedCards: new Set()
            };
            
            // DOM å…ƒç´ 
            const gameBoard = document.getElementById('game-board');
            const player1ScoreEl = document.getElementById('player1-score');
            const player2ScoreEl = document.getElementById('player2-score');
            const player1Info = document.getElementById('player1-info');
            const player2Info = document.getElementById('player2-info');
            const player1PoisonEl = document.getElementById('player1-poison');
            const player2PoisonEl = document.getElementById('player2-poison');
            const startBtn = document.getElementById('start-btn');
            const restartBtn = document.getElementById('restart-btn');
            const currentTurnEl = document.getElementById('current-turn');
            const deathModal = document.getElementById('death-modal');
            const deathMessageEl = document.getElementById('death-message');
            const poisonCardDisplay = document.getElementById('poison-card-display');
            const deathScoreEl = document.getElementById('death-score');
            const playAgainBtn = document.getElementById('play-again-btn');
            
            // åˆå§‹åŒ–æ¸¸æˆ
            function initGame() {
                // é‡ç½®çŠ¶æ€
                state.player1Poison = null;
                state.player2Poison = null;
                state.player1Score = 0;
                state.player2Score = 0;
                state.currentPlayer = 1;
                state.gamePhase = 'selectPoison1';
                state.lockedCards.clear();
                
                // æ›´æ–°UI
                player1ScoreEl.textContent = '0';
                player2ScoreEl.textContent = '0';
                player1PoisonEl.innerHTML = '<i class="fas fa-skull"></i>æœªè®¾ç½®';
                player2PoisonEl.innerHTML = '<i class="fas fa-skull"></i>æœªè®¾ç½®';
                player1Info.classList.add('active');
                player2Info.classList.remove('active');
                startBtn.disabled = true;
                deathModal.classList.remove('active');
                currentTurnEl.innerHTML = '<i class="fas fa-hand-point-right"></i>ç©å®¶ä¸€ï¼Œè¯·é€‰æ‹©ä½ çš„æ¯’è¯å¡ç‰‡';
                
                // åˆ›å»ºå¡ç‰‡
                createCards();
            }
            
            // åˆ›å»ºå¡ç‰‡
            function createCards() {
                gameBoard.innerHTML = '';
                state.cards = [];
                
                // éšæœºé€‰æ‹©24ä¸ªåŒ–å­¦å¼
                const shuffled = [...chemicals].sort(() => 0.5 - Math.random());
                const selectedChemicals = shuffled.slice(0, 24);
                
                for (let i = 0; i < 24; i++) {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.dataset.index = i;
                    
                    card.innerHTML = `
                        <div class="card-inner">
                            <div class="card-back"></div>
                            <div class="card-front">${selectedChemicals[i]}</div>
                        </div>
                    `;
                    
                    card.addEventListener('click', () => handleCardClick(i));
                    gameBoard.appendChild(card);
                    
                    // å­˜å‚¨å¡ç‰‡çŠ¶æ€
                    state.cards.push({
                        element: card,
                        content: selectedChemicals[i],
                        isFlipped: false,
                        isLocked: false
                    });
                }
            }
            
            // å¤„ç†å¡ç‰‡ç‚¹å‡»
            function handleCardClick(index) {
                const card = state.cards[index];
                if (card.isLocked) return;
                
                switch (state.gamePhase) {
                    case 'selectPoison1':
                        selectPoison(index, 1);
                        break;
                    case 'selectPoison2':
                        selectPoison(index, 2);
                        break;
                    case 'playing':
                        playTurn(index);
                        break;
                }
            }
            
            // é€‰æ‹©æ¯’è¯
            function selectPoison(index, player) {
                const card = state.cards[index];
                
                // ç¿»è½¬å¡ç‰‡
                card.element.classList.add('flipped');
                
                if (player === 1) {
                    state.player1Poison = index;
                    player1PoisonEl.innerHTML = '<i class="fas fa-skull"></i>å·²è®¾ç½®';
                    state.gamePhase = 'selectPoison2';
                    currentTurnEl.innerHTML = '<i class="fas fa-hand-point-right"></i>ç©å®¶äºŒï¼Œè¯·é€‰æ‹©ä½ çš„æ¯’è¯å¡ç‰‡';
                    player1Info.classList.remove('active');
                    player2Info.classList.add('active');
                } else {
                    state.player2Poison = index;
                    player2PoisonEl.innerHTML = '<i class="fas fa-skull"></i>å·²è®¾ç½®';
                    state.gamePhase = 'waitingToStart';
                    currentTurnEl.innerHTML = '<i class="fas fa-check-circle"></i>å‡†å¤‡å¼€å§‹æ¸¸æˆ...';
                    player2Info.classList.remove('active');
                    startBtn.disabled = false;
                }
                
                // 5ç§’åç¿»å›å¡ç‰‡
                setTimeout(() => {
                    card.element.classList.remove('flipped');
                }, 5000);
            }
            
            // ç©å®¶å›åˆ
            function playTurn(index) {
                const card = state.cards[index];
                
                // ç¿»è½¬å¹¶é”å®šå¡ç‰‡
                card.element.classList.add('flipped', 'locked');
                card.isLocked = true;
                state.lockedCards.add(index);
                
                // æ£€æŸ¥æ˜¯å¦æŠ½åˆ°æ¯’è¯
                if ((state.currentPlayer === 1 && index === state.player2Poison) ||
                    (state.currentPlayer === 2 && index === state.player1Poison)) {
                    // ç©å®¶æ­»äº¡
                    showDeathScreen(state.currentPlayer === 1 ? 2 : 1, index);
                    return;
                }
                
                // å®‰å…¨å¡ç‰‡ï¼Œå¢åŠ åˆ†æ•°
                if (state.currentPlayer === 1) {
                    state.player1Score++;
                    player1ScoreEl.textContent = state.player1Score;
                    state.currentPlayer = 2;
                    currentTurnEl.innerHTML = '<i class="fas fa-hand-point-right"></i>ç©å®¶äºŒï¼Œè¯·ç¿»å¼€ä¸€å¼ å¡ç‰‡';
                    player1Info.classList.remove('active');
                    player2Info.classList.add('active');
                } else {
                    state.player2Score++;
                    player2ScoreEl.textContent = state.player2Score;
                    state.currentPlayer = 1;
                    currentTurnEl.innerHTML = '<i class="fas fa-hand-point-right"></i>ç©å®¶ä¸€ï¼Œè¯·ç¿»å¼€ä¸€å¼ å¡ç‰‡';
                    player1Info.classList.add('active');
                    player2Info.classList.remove('active');
                }
                
                // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸï¼ˆæ‰€æœ‰å¡ç‰‡ç¿»å¼€ï¼‰
                if (state.lockedCards.size === 24) {
                    endGameWithScore();
                }
            }
            
            // æ˜¾ç¤ºæ­»äº¡ç•Œé¢
            function showDeathScreen(winningPlayer, poisonIndex) {
                state.gamePhase = 'gameOver';
                
                // æ˜¾ç¤ºæ¯’è¯å¡ç‰‡
                const poisonCard = state.cards[poisonIndex];
                poisonCard.element.classList.add('flipped', 'poison');
                
                // è®¾ç½®æ­»äº¡ä¿¡æ¯
                deathMessageEl.textContent = `ç©å®¶${winningPlayer === 1 ? 'äºŒ' : 'ä¸€'}æŠ½ä¸­äº†ç©å®¶${winningPlayer}çš„æ¯’è¯ï¼`;
                poisonCardDisplay.textContent = poisonCard.content;
                deathScoreEl.textContent = `æœ€ç»ˆå¾—åˆ†: ç©å®¶ä¸€ ${state.player1Score} - ç©å®¶äºŒ ${state.player2Score}`;
                
                // æ˜¾ç¤ºæ­»äº¡å¼¹çª—
                setTimeout(() => {
                    deathModal.classList.add('active');
                }, 1000);
            }
            
            // é€šè¿‡åˆ†æ•°ç»“æŸæ¸¸æˆï¼ˆæ‰€æœ‰å¡ç‰‡ç¿»å¼€ï¼‰
            function endGameWithScore() {
                state.gamePhase = 'gameOver';
                
                let winner;
                if (state.player1Score > state.player2Score) {
                    winner = 1;
                } else if (state.player2Score > state.player1Score) {
                    winner = 2;
                } else {
                    winner = 0;
                }
                
                // è®¾ç½®æ­»äº¡ä¿¡æ¯
                deathMessageEl.textContent = winner ? `ç©å®¶ ${winner} èƒœåˆ©ï¼` : "å¹³å±€ï¼";
                poisonCardDisplay.textContent = "æ‰€æœ‰å¡ç‰‡å·²ç¿»å¼€";
                deathScoreEl.textContent = `æœ€ç»ˆå¾—åˆ†: ç©å®¶ä¸€ ${state.player1Score} - ç©å®¶äºŒ ${state.player2Score}`;
                
                // æ˜¾ç¤ºæ­»äº¡å¼¹çª—
                setTimeout(() => {
                    deathModal.classList.add('active');
                }, 500);
            }
            
            // äº‹ä»¶ç›‘å¬å™¨
            startBtn.addEventListener('click', () => {
                state.gamePhase = 'playing';
                startBtn.disabled = true;
                state.currentPlayer = 1;
                currentTurnEl.innerHTML = '<i class="fas fa-hand-point-right"></i>ç©å®¶ä¸€ï¼Œè¯·ç¿»å¼€ä¸€å¼ å¡ç‰‡';
                player1Info.classList.add('active');
                player2Info.classList.remove('active');
            });
            
            restartBtn.addEventListener('click', initGame);
            
            playAgainBtn.addEventListener('click', () => {
                deathModal.classList.remove('active');
                initGame();
            });
            
            // åˆå§‹åŒ–æ¸¸æˆ
            initGame();
        });
    </script>
</body>
</html>